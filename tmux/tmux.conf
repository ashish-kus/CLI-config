# Options
set -g default-command "${SHELL}"
set-option -g default-terminal "tmux-256color"
set -g terminal-overrides 'xterm*:smcup@:rmcup@'
set-option -sa terminal-overrides ',xterm-termite:RGB'
set -g cursor-style block
set -sg escape-time 10
set-option -g set-clipboard on
set -s copy-command 'wl-copy'

# Status bar and title
set -g set-titles on
set -g status-interval 2
set -g status-keys vi

# Window options
setw -g alternate-screen on
setw -g automatic-rename on
setw -g monitor-activity on
setw -g xterm-keys off
setw -g aggressive-resize off
set -g renumber-windows on

# Vi key bindings
set -g status-keys vi
setw -g mode-keys vi

set -g mouse on
set -g history-limit 10000
set -g base-index 1
setw -g pane-base-index 0
set -g default-shell "$SHELL"
set -g focus-events on

# Alert settings
set -g bell-action any
set -g visual-bell on
set -g visual-activity on

# Keybindings
unbind C-b
set -g prefix C-a
bind C-a send-prefix
bind S choose-session

unbind '{'
bind-key H swap-pane -D
unbind '}'
bind-key L swap-pane -U

bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

bind P paste-buffer
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X rectangle-toggle
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel 'wl-copy'
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel 'wl-copy'
bind-key -T copy-mode-vi 'Space' send -X halfpage-down
bind-key -T copy-mode-vi 'Bspace' send -X halfpage-up

unbind %
bind | split-window -h -c "#{pane_current_path}"
unbind '"'
bind - split-window -v -c "#{pane_current_path}"

unbind r
bind-key r source-file ~/.config/tmux/tmux.conf \; display-message "tmux.conf reloaded."

bind F set -w window-size

bind x kill-pane
bind q kill-window
bind Q kill-session

# Plugins
bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; new-window -n "urlview" '$SHELL -c "urlview < /tmp/tmux-buffer"'
